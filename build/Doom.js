/* Doom.js Library Version: 1.3.0 Copyright (c) 2015 Iain Shorter */if(!window.Doom){window.Doom = {}; (function() {'use strict';"indexOf"in Array.prototype||Object.defineProperty(Array.prototype,"indexOf",{value:function(b,a){for(var d=+a||0,e=this.length;d<e;d++)if(d in this&&this[d]===b)return d;return-1}});"trim"in String.prototype||Object.defineProperty(String.prototype,"trim",{value:function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}});
if(!("classList"in document.createElement("_"))&&"Element"in window){var classListGetter=function(){var b=new ClassList(this);Object.defineProperty(this,"classList",{get:function(){updateFromClassName(b,this.className);return b}});return b},ClassList=function(b){updateFromClassName(this,b.className);this._updateClassName=function(){b.className=this+""}},updateFromClassName=function(b,a){for(var d=a.trim(),d=d?d.split(/\s+/):[],e=b.length=0,g=d.length;e<g;e++)b.push(d[e])},checkTokenAndGetIndex=function(b,
a){if(""===a)throw new DOMEx("SYNTAX_ERR","The token provided must not be empty");if(/\s/.test(a))throw new DOMEx("INVALID_CHARACTER_ERR","The token provided ('"+a+"') contains HTML space characters, which are not valid in tokens");return b.indexOf(a)},DOMEx=function(b,a){this.name=b;this.code=DOMException[b];this.message=a};DOMEx.prototype=Error.prototype;ClassList.prototype=[];ClassList.prototype.item=function(b){return this[b]||null};ClassList.prototype.contains=function(b){return-1!==checkTokenAndGetIndex(this,
b+"")};ClassList.prototype.add=function(){for(var b=!1,a=0,d=arguments.length,e;a<d;a++)e=arguments[a]+"",-1===checkTokenAndGetIndex(this,e)&&(this.push(e),b=!0);b&&this._updateClassName(this)};ClassList.prototype.remove=function(){for(var b=0,a=arguments.length,d,e;b<a;b++)for(d=arguments[b]+"",e=checkTokenAndGetIndex(this,d);-1!==e;)this.splice(e,1),e=checkTokenAndGetIndex(this,d);this._updateClassName()};ClassList.prototype.toggle=function(b){b+="";var a=this.contains(b);this[a?"remove":"add"](b);
return!a};ClassList.prototype.toString=function(){return this.join(" ")};if(Object.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{Object.defineProperty(Element.prototype,"classList",classListPropDesc)}catch(ex){-2146823252===ex.number&&(classListPropDesc.enumerable=!1,Object.defineProperty(Element.prototype,"classList",classListPropDesc))}}else Object.prototype.__defineGetter__?elemCtrProto.__defineGetter__("classList",classListGetter):console.warn("Failed to add classlist polyfill")};if(window.Promise)Doom.Promise=window.Promise;else{var Promise=function(b){if(this instanceof Promise)this.state=STATE_INIT,this.subscriberqueue=[],this.settledValue=this.resolvehandler=this.rejectionhandler=void 0,b!==INTERNAL&&this.resolveWithResolver(b);else return new Promise(b)},tryCatch=function(b){return function(a,d){try{return b(a,d)}catch(e){return errorObj.e=e,errorObj}}},errorObj={e:null},STATE_INIT=0,STATE_PEND=1,STATE_RSLV=2,STATE_RJCT=3,INTERNAL=function(){};Promise.prototype={resolveWithResolver:function(b){var a=
this;this.state=STATE_PEND;b=tryCatch(b)(function(d){null!==a&&(a.resolveCallback(d),a=null)},function(d){null!==a&&(a.rejectCallback(d),a=null)});void 0!==b&&null!==a&&(a.rejectCallback(b.e),a=null)},resolveCallback:function(b){var a=this;b instanceof Promise?b.then(function(d){null!==a&&(a.resolveCallback(d),a=null)},function(d){null!==a&&(a.rejectCallback(d),a=null)}):(this.state=STATE_RSLV,this.resolvehandler?(b=tryCatch(this.resolvehandler)(b),b===errorObj?a.reject(b.e):b instanceof Promise?
b.then(function(d){null!==a&&(a.fulfill(d),a=null)},function(d){null!==a&&(a.reject(d),a=null)}):a.fulfill(b)):this.fulfill(b))},rejectCallback:function(b){var a=this;b instanceof Promise?b.then(function(d){null!==a&&(a.resolveCallback(d),a=null)},function(d){null!==a&&(a.rejectCallback(d),a=null)}):(this.state=STATE_RJCT,this.rejectionhandler?(b=tryCatch(this.rejectionhandler)(b),b===errorObj?(a.reject(b.e),a=null):b instanceof Promise?b.then(function(d){a.fulfill(d);a=null},function(d){a.reject(d);
a=null}):(a.fulfill(b),a=null)):this.reject(b))},fulfill:function(b){function a(a){return function(){a.resolveCallback(b);d.settledValue=b}}for(var d=this,e;this.subscriberqueue.length;)e=this.subscriberqueue.shift(),setTimeout(a(e),0)},reject:function(b,a){function d(a){return function(){a.rejectCallback(b);e.settledValue=b}}var e=this,g;if(!this.subscriberqueue.length)throw b;for(;this.subscriberqueue.length;)g=this.subscriberqueue.shift(),setTimeout(d(g),0)},then:function(b,a){var d=new Promise(INTERNAL);
d.resolvehandler=b;d.rejectionhandler=a;this.subscriberqueue.push(d);this.state===STATE_RSLV?this.fulfill(this.settledValue):this.state===STATE_RJCT&&this.reject(this.settledValue);return d},catch:function(b){return this.then(void 0,b)}};Doom.Promise=Promise};Element.prototype.contains||(Element.prototype.contains=function(b){return!!(this.compareDocumentPosition(b)&16)});var alloys={};function createAlloy(b,a){b=b.toLowerCase();if(alloys[b]){var d=new alloys[b](a);d.alloyName=b;d.element.alloy=d;return d.element}throw Error('Construction Error, alloy "'+b+'" does not exist');}Doom.define=function(b,a){b=b.toLowerCase();if(alloys[b])throw Error('Definition Error, alloy "'+b+'" already exists!');alloys[b]=a};(function(){function b(e){var b,h,f;if("object"!==typeof e)throw Error("Element object structure is not defined");if(f=e.refMap||e.referenceMap){if("object"!==typeof f)throw Error("Reference object is not an object");d.unshift(f)}h="string"===typeof e.alloyName||"string"===typeof e.alloy?createAlloy(e.alloyName||e.alloy,e.alloyProperties||{}):document.createElement(e.tagName||"div");for(b in e)b in a?a[b].apply(h,[e[b]]):h[b]=e[b];f&&d.shift();return h}var a={},d=[];a.tag=a.tagName=a.alloy=a.alloyName=
a.alloyProperties=a.copies=function(){};a.ref=a.reference=function(a){if(!d[0])throw Error('No reference map defined for "'+a+'"');if(d[0][a])throw Error('Label "'+a+'" already defined for reference map');d[0][a]=this};a.onTap=a.ontap=function(a){return Doom.touch(this,"tap",a)};a.onSwipe=a.onswipe=function(a){return Doom.touch(this,"swipe",a)};a.onhold=a.onHold=function(a){return Doom.touch(this,"hold",a)};a.onpan=a.onPan=function(a){return Doom.touch(this,"pan",a)};a.ontouchstart=a.onTouchStart=
function(a){return Doom.touch(this,"touchstart",a)};a.ontouchend=a.onTouchEnd=function(a){return Doom.touch(this,"touchend",a)};a.onConnected=a.onconnected=function(a){return Doom.addMutationEvent(this,"connect",a)};a.onDisconnected=a.ondisconnected=function(a){return Doom.addMutationEvent(this,"disconnect",a)};a.onAdopted=a.onadopted=function(a){return Doom.addMutationEvent(this,"adopt",a)};a.parentNode=a.parent=function(a){return a.appendChild(this)};a.insertBefore=function(a){a.parentNode.insertBefore(this,
a)};a.insertAfter=function(a){a.nextSibling?a.parentNode.insertBefore(this,a.nextSibling):a.parentNode.appendChild(this)};a.insertFirst=function(a){a.insertBefore(this,a.firstChild)};a.style=function(a){if("object"===typeof a)for(var d in a)this.style[d]=a[d];else if("string"===typeof a)this.style.cssText+=a;else throw Error("Style TypeError - "+typeof a);};a.childNodes=a.children=function(d){for(var b=0;b<d.length;b++)d[b]=a.child.apply(this,[d[b]]);return d};a.child=function(a){if(a instanceof HTMLElement)this.appendChild(a);
else if("string"===typeof a)for(var d=Doom.create({innerHTML:a});d.firstChild;)this.appendChild(d.firstChild);else if("object"===typeof a)a.parentNode=this,a=b(a);else throw Error("Child TypeError - "+typeof a);return a};a.dataset=function(a){for(var d in a)this.dataset[d]=a[d]};Doom.create=b})();(function(){function b(a){var d=[];for(i in a)d.push(i+"="+escape(encodeURI(a[i])));return d.join("&")}function a(a,b){for(var h in d.headers)void 0===b[h]&&(b[h]=d.headers[h]);for(h in b)a.setRequestHeader(h,b[h])}var d={method:"GET",encode:"json",timeout:0,credentials:!0,headers:{Accept:"*/*","Content-type":"application/json;charset=UTF-8"}};Doom.fetch=function(e){return new Doom.Promise(function(g,h){var f=new XMLHttpRequest,r=e.encode||d.encode,s=e.timeout||d.timeout,q="undefined"!==typeof e.withCredentials?
e.withCredentials:d.credentials,m=e.headers||{};f.open(e.method||d.method,"string"===typeof e?e:e.url);f.timeout=s;q&&(f.withCredentials=!0);a(f,m);f.onload=function(){400>f.status&&200<=f.status?g(f.response):h(f)};f.onerror=function(){h(f)};f.onabort=function(){h(f)};0!==s&&setTimeout(f.abort.bind(f),s);"json"===r?f.send(e.data?JSON.stringify(e.data):null):"url"===r&&f.send(e.data?b(e.data):null)})};Doom.fetch.DEFAULTS=d})();(function(){function b(d){var e=d.element,g,h;if(e)if("string"===typeof e)e=Doom.search(e),d.element=e,b(d);else{if(!1===e instanceof HTMLElement&&e[0]){g=0;for(h=~~e.length;g<h;g++)d.element=e[g],b(d);return e}if(e instanceof HTMLElement)if(d.delay)g=d.delay,d.delay=null,setTimeout(b,g,d);else{for(g in d)g in a?a[g].apply(e,[d[g]]):e[g]=d[g];return e}else throw Error("Element TypeError - "+typeof e);}else throw Error("Element not defined");}var a={};a.tagName=a.alloyName=a.alloyProperties=a.copies=
function(){};a.onTap=a.ontap=function(a){return Doom.touch(this,"tap",a)};a.onSwipe=a.onswipe=function(a){return Doom.touch(this,"swipe",a)};a.onhold=a.onHold=function(a){return Doom.touch(this,"hold",a)};a.onpan=a.onPan=function(a){return Doom.touch(this,"pan",a)};a.ontouchstart=a.onTouchStart=function(a){return Doom.touch(this,"touchstart",a)};a.ontouchend=a.onTouchEnd=function(a){return Doom.touch(this,"touchend",a)};a.onConnected=a.onconnected=function(a){return Doom.addMutationEvent(this,"connect",
a)};a.onDisconnected=a.ondisconnected=function(a){return Doom.addMutationEvent(this,"disconnect",a)};a.onAdopted=a.onadopted=function(a){return Doom.addMutationEvent(this,"adopt",a)};a.parentNode=a.parent=function(a){return a.appendChild(this)};a.insertBefore=function(a){a.parentNode.insertBefore(this,a)};a.insertAfter=function(a){a.nextSibling?a.parentNode.insertBefore(this,a.nextSibling):a.parentNode.appendChild(this)};a.insertFirst=function(a){a.insertBefore(this,a.firstChild)};a.style=function(a){if("object"===
typeof a)for(var b in a)this.style[b]=a[b];else if("string"===typeof a)this.style.cssText+=a;else throw Error("Style TypeError - "+typeof a);};a.addClass=function(a){this.classList.add.apply(this.classList,a.split(" "))};a.toggleClass=function(a){a=a.split(" ");for(var b=0,g=a.length;b<g;b++)this.classList.toggle(a[b])};a.removeClass=function(a){this.classList.remove.apply(this.classList,a.split(" "))};a.addClasses=function(a){this.classList.add.apply(this.classList,a)};a.toggleClasses=function(a){for(var b=
0,g=a.length;b<g;b++)this.classList.toggle(a[b])};a.removeClasses=function(a){this.classList.remove.apply(this.classList,a)};a.childNodes=a.children=function(a){for(;this.firstChild;)this.removeChild(this.firstChild);for(var b=0;b<a.length;b++)if(a[b]instanceof HTMLElement)this.appendChild(a[b]);else if("string"===typeof a[b])for(var g=Doom.create({innerHTML:a[b]});g.firstChild;)this.appendChild(g.firstChild);else if("object"===typeof a[b])a[b].parentNode=this,a[b]=Doom.create(a[b]);else throw Error("Child TypeError - "+
typeof a[b]);return a};a.child=function(a){if(1!==this.children.length||a!==this.firstChild){for(;this.firstChild;)this.removeChild(this.firstChild);if(a instanceof HTMLElement)this.appendChild(a);else if("string"===typeof a)for(var b=Doom.create({innerHTML:a});b.firstChild;)this.appendChild(b.firstChild);else if("object"===typeof a)a.parentNode=this,a=Doom.create(a);else throw Error("Child TypeError - "+typeof a[i]);return a}};a.removeChild=function(a){"number"===typeof a?this.removeChild(this.childNodes[a]):
this.removeChild(a)};a.removeChildren=a.removeChildNodes=function(a){for(var b=a.length;b--;)"number"===typeof a[b]&&(a[b]=this.childNodes[a[b]]);for(n=a.length;b--;)this.removeChild(a[b])};a.innerHTML=function(a){this.innerHTML!==a&&(this.innerHTML=a)};a.dataset=function(a){for(var b in prop)element.dataset[b]=prop[b]};Doom.modify=b})();Doom.remove=function(b,a){if(a)setTimeout(Doom.remove,a,b);else{"string"===typeof b&&(b=Doom.search(b));if(b[0]){for(var d=b.length;d--;)Doom.remove(b[d]);return b}b.parentNode&&b.parentNode.removeChild(b)}return b};Doom.search=function(b,a){a=a||document;switch(b.charAt(0)){case ".":return a.getElementsByClassName(b.substr(1));case "#":return a.getElementById(b.substr(1));case "?":return a.querySelectorAll(b.substr(1));default:return a.getElementsByTagName(b)}};(function(){function b(a){function b(){m=null;k.x=null;k.y=null;k.t=null;c.event=null;c.gesture=null;c.pos_t_start=null;c.pos_t_previous=null;c.pos_t_end=null;c.pos_t_delta=null;c.pos_x_start=null;c.pos_x_previous=null;c.pos_x_end=null;c.pos_x_delta=null;c.pos_y_start=null;c.pos_y_previous=null;c.pos_y_end=null;c.pos_y_delta=null;c.pos_u_delta=null;c.vel_x=null;c.vel_y=null;c.vel_u=null;c.dist_x=null;c.dist_y=null;c.dist_u=null;c.direction=null;clearTimeout(t);t=null}function e(){k.x="pageX"in m?
m.pageX:m.changedTouches[0].pageX;k.y="pageY"in m?m.pageY:m.changedTouches[0].pageY;k.t=m.timeStamp}function g(a){m||(c.event=m=a,e(),c.pos_t_start=k.t,c.pos_x_start=k.x,c.pos_y_start=k.y,c.pos_t_delta=0,c.pos_x_delta=0,c.pos_y_delta=0,c.pos_u_delta=0,t=setTimeout(s,l.HOLD_MINTIME),q.event("touchstart",c))}function h(a){if(m){var b;c.event=m=a;c.pos_t_previous=k.t;c.pos_x_previous=k.x;c.pos_y_previous=k.y;e();c.pos_t_delta=k.t-c.pos_t_start;a=k.x-c.pos_x_previous;b=k.y-c.pos_y_previous;c.pos_x_delta+=
Math.abs(a);c.pos_y_delta+=Math.abs(b);c.pos_u_delta+=Math.sqrt(a*a+b*b);c.dist_x=k.x-c.pos_x_start;c.dist_y=k.y-c.pos_y_start;c.dist_u=Math.sqrt(c.dist_x*c.dist_x+c.dist_y*c.dist_y);c.vel_x=c.dist_x/c.pos_t_delta;c.vel_y=c.dist_y/c.pos_t_delta;c.vel_u=c.dist_u/c.pos_t_delta;q.event("touchmove",c);c.pos_u_delta>l.PAN_MINDELTA&&(Math.abs(c.dist_x)>Math.abs(c.dist_y)?(c.direction=0<a?"RIGHT":"LEFT",q.event("pan"+c.direction.toLowerCase(),c),q.event("panhorizontal",c)):(c.direction=0<b?"DOWN":"UP",q.event("pan"+
c.direction.toLowerCase(),c),q.event("panvertical",c)),q.event("pan",c))}}function f(a){if(m){var f;c.event=m=a;e();c.pos_t_end=k.t;c.pos_x_end=k.x;c.pos_y_end=k.y;c.pos_t_delta=k.t-c.pos_t_start;a=null===c.pos_x_previous?0:k.x-c.pos_x_previous;f=null===c.pos_y_previous?0:k.y-c.pos_y_previous;c.pos_x_delta+=Math.abs(a);c.pos_y_delta+=Math.abs(f);c.pos_u_delta+=Math.sqrt(a*a+f*f);c.dist_x=k.x-c.pos_x_start;c.dist_y=k.y-c.pos_y_start;c.dist_u=Math.sqrt(c.dist_x*c.dist_x+c.dist_y*c.dist_y);c.vel_x=c.dist_x/
c.pos_t_delta;c.vel_y=c.dist_y/c.pos_t_delta;c.vel_u=c.dist_u/c.pos_t_delta;q.event("touchend",c);"mouseleave"!==m.type&&"touchleave"!==m.type&&c.pos_t_delta<l.TAP_MAXTIME&&c.pos_u_delta<l.TAP_MAXDELTA&&(q.event("tap",c),l.PREVENT_DBL_CLICK&&m.preventDefault());c.pos_t_delta<l.SWIPE_MAXTIME&&c.vel_u>l.SWIPE_MINSPEED&&(Math.abs(c.dist_x)>Math.abs(c.dist_y)?(c.direction=0<c.dist_x?"RIGHT":"LEFT",q.event("swipe"+c.direction.toLowerCase(),c),q.event("swipehorizontal",c)):(c.direction=0<c.dist_y?"DOWN":
"UP",q.event("swipe"+c.direction.toLowerCase(),c),q.event("swipevertical",c)),q.event("swipe",c));b()}}function r(a){m&&l.END_ON_LEAVE&&f(a)}function s(){m&&(e(),c.pos_t_delta=k.t-c.pos_t_start,c.dist_u&&(c.vel_x=c.dist_x/c.pos_t_delta,c.vel_y=c.dist_y/c.pos_t_delta,c.vel_u=c.dist_u/c.pos_t_delta),c.pos_u_delta<l.HOLD_MAXDELTA&&q.event("hold",c))}var q=this,m=null,t=null,p=a.style,l={TAP_MAXTIME:500,TAP_MAXDELTA:20,PAN_MINDELTA:20,HOLD_MINTIME:500,HOLD_MAXDELTA:20,SWIPE_MAXTIME:400,SWIPE_MINSPEED:1,
END_ON_LEAVE:!1,PREVENT_DBL_CLICK:!1,TOUCH:"ontouchstart"in window,MOUSE:!0},k={x:null,y:null,t:null},c={pos:k,event:null,preventDefault:function(){m&&m.cancellable&&m.preventDefault()},stopProgagation:function(){m&&m.stopProgagation&&m.stopProgagation()},childIndex:function(b){b=b||a;for(var c=-1,d=0,e=b.children.length;d<e;d++)if(b.children[d].contains(m.target)){c=d;break}return c},childNode:function(b){b=b||a;for(var c,d=0,e=b.children.length;d<e;d++)if(b.children[d].contains(m.target)){c=b.children[d];
break}return c},element:a};this.detach=function(){l.TOUCH&&(a.removeEventListener("touchstart",g,!1),a.removeEventListener("touchmove",h,!1),document.body.removeEventListener("touchcancel",f,!1),document.body.removeEventListener("touchend",f,!1),a.removeEventListener("touchleave",r,!1));l.MOUSE&&(a.removeEventListener("mousedown",g,!1),a.removeEventListener("mousemove",h,!1),document.body.removeEventListener("mouseup",f,!1),a.removeEventListener("mouseleave",r,!1))};this.attach=function(){l.TOUCH&&
(a.addEventListener("touchstart",g,!1),a.addEventListener("touchmove",h,!1),document.body.addEventListener("touchcancel",f,!1),document.body.addEventListener("touchend",f,!1),a.addEventListener("touchleave",r,!1));l.MOUSE&&(a.addEventListener("mousedown",g,!1),a.addEventListener("mousemove",h,!1),document.body.addEventListener("mouseup",f,!1),a.addEventListener("mouseleave",r,!1))};p.webkitUserSelect="none";p.mozUserSelect="none";p.msUserSelect="none";p.webkitUserDrag="none";p.webkitTapHighlightColor=
"rgba(0,0,0,0)";b();this.attach();this.__eventlist__={};this.element=a;this.CONFIG=l;a.touches=this}b.prototype={on:function(a,b){"tap"===a&&(this.CONFIG.PREVENT_DBL_CLICK=!0);this.__eventlist__[a.toLowerCase()]=b},event:function(a,b){if("function"===typeof this.__eventlist__[a]){b.gesture=a;try{this.__eventlist__[a].call(this,b)}catch(e){console.error(e.stack||e)}}}};Doom.touch=function(a,d,e){a.touches||new b(a);if(d&&d.constructor===Array)for(var g=0,h=d.length;g<h;g++)a.touches.on(d[g],e);else a.touches.on(d,
e);return a.touches}})();(function(){function b(a){var b=function(){d&&(a(),d=s(b))},d=s(b);return function(){d=null}}function a(a,e){for(var h=0,p=f.length,l=null;h<p;h++)if(f[h].element===a){l=f[h];break}!l&&e&&(l={element:a,root:d(a),parent:a.parentNode,handlers:{connect:[],disconnect:[],adopt:[],length:0}},f.push(l),r||(r=b(g)));return l}function d(a){for(var b=null;a.parentNode;)b=a=a.parentNode;return b}function e(a,b,d){b=a.handlers[b];a=a.element;for(var e=0,f=b.length;e<f;e++)b[e].call(a,d)}function g(a){a=~~a;for(var b=
0,h=f.length,p=null,l=null,k=!1;b<h;b++){var p=f[b],l=p.element,c=d(l);p.root!==c&&(e(p,"adopt",{type:"adopt",element:l,oldRoot:p.root,newRoot:c}),p.root=c,k=!0);p.parent!==l.parentNode&&(e(p,"disconnect",{type:"disconnect",element:l,from:p.parent}),l.parentNode&&e(p,"connect",{type:"connect",element:l,to:l.parentNode}),p.parent=l.parentNode,k=!0)}if(k){if(10<=a)throw Error("Observed element mutation exceeded maximum cyclic changes");g(a+1)}}var h=["adopt","connect","disconnect"],f=[],r=null,s=function(){var a=
16,b=Date.now||function(){return+new Date};return requestAnimationFrame||function(d){setTimeout(function(){var e=b();d();a+=.1*(b()-e-a);a=Math.round(Math.min(Math.max(a,16),100))},a)}}();Doom.addMutationEvent=function(b,d,e){if(!(b instanceof HTMLElement))throw new TypeError("Cannot observer non-HTMLElement based objects");if(!(e instanceof Function))throw new TypeError("Callback handler is not a Function");if(-1===h.indexOf(d))throw Error('Unknown mutation event "'+d+'"');b=a(b,!0);-1===b.handlers[d].indexOf(e)&&
(b.handlers[d].push(e),b.handlers.length++)};Doom.removeMutationEvent=function(b,d,e){if(!(b instanceof HTMLElement))throw new TypeError("Cannot observer non-HTMLElement based objects");if(!(e instanceof Function))throw new TypeError("Callback handler is not a Function");if(-1===h.indexOf(d))throw Error('Unknown mutation event "'+d+'"');var g=a(b,!1);if(g&&(e=g.handlers[d].indexOf(e),-1!==e))if(1===g.handlers.length){d=0;for(g=f.length;d<g;d++)if(f[d].element===b){f.splice(d,1);break}0===f.length&&
r&&(r(),r=null)}else g.handlers[d].splice(e,1),g.handlers.length--}})();})();}
